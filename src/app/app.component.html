<div nz-row>
  <div nz-col nzSpan="24">
    <nz-input-group nzSize="large" [nzAddOnAfter]="suffixIconButton">
      <input #searchInput nz-input [(ngModel)]="searchKey" (ngModelChange)="onChangeSearchInput()"
        (keydown.enter)="searchInput.blur()" placeholder="Search key..." />
    </nz-input-group>
    <ng-template #suffixIconButton>
      <button nz-button nzType="primary" nzSearch (click)="onClearSearch()"><i nz-icon nzType="clear"
          nzTheme="outline"></i></button>
    </ng-template>
  </div>
</div>

<div nz-row>
  <div nz-col nzSpan="18">
    <nz-transfer [nzDataSource]="patterns" [nzRender]="renderTransfer" [nzFooter]="footerTransfer"
      [nzTitles]="['suggested pattern', 'searched pattern']" (nzChange)="onChangeTransfer($event)"
      [nzListStyle]="{ 'width': '50%', 'height': '50vh' }"></nz-transfer>
    <ng-template #renderTransfer let-item>
      <span>
        {{item.title }}
        <button nz-button nzType="link" [nzSize]="'small'" nzDanger (click)="onDeletePattern(item)"><i nz-icon
            nzType="delete"></i></button>
      </span>
    </ng-template>
    <ng-template #footerTransfer let-direction>
      <button [disabled]="!searchKey" nz-button (click)="onAddPattern(direction)" [nzSize]="'small'" nzType="primary"
        style="float: right; margin: 5px;">
        Add
      </button>
    </ng-template>

    <div nz-row>
      <div nz-col nzSpan="12">
        <label [(ngModel)]="options.useLevenshtein" (ngModelChange)="onSearch()" nz-checkbox class="pl-3 pt-5">
          Use Levenshtein Distance to sort inspection with same score
        </label>
        <label [(ngModel)]="options.useCustomSearch" (ngModelChange)="onSearch()" nz-checkbox class="pt-5">
          Use custom search exact for multi language (not use ext lib) (<span class="text-danger">CSE</span>)
        </label>
        <!-- <label [(ngModel)]="options.useFuse" (ngModelChange)="onSearch()" nz-checkbox class="pt-5">
          Use Fuse.js fuzzy search library https://fusejs.io (<span class="text-danger">FUS</span>)
        </label> -->
        <label [(ngModel)]="options.useUpperWord" (ngModelChange)="onSearch()" nz-checkbox class="pt-5">
          Search by first letter of each word in uppercase (<span class="text-danger">FWU</span>)
        </label>
        <label nz-checkbox class="pt-5">
          Skip fuzzy search when keyword less or equal than 3 characters
        </label>
        <label nz-checkbox nzDisabled class="pt-5">Use lunr languages</label> <br>
        <label nz-checkbox nzDisabled class="pl-3 pt-5">Search with exact number value</label>
      </div>
      <div nz-col nzSpan="12">
        <div class="pt-5 pl-3">
          <span>Min Score:</span>
          <nz-input-number [(ngModel)]="options.minScore" [nzMin]="0" [nzStep]="0.001"
            [nzDisabled]="inspections.length == rawInspection.length" (ngModelChange)="onSearch(true)" class="ml-3">
          </nz-input-number>
        </div>


        <label [(ngModel)]="options.isSortScore" (ngModelChange)="onSearch(true)" nz-checkbox class="pt-5 pl-3">
          Sort by score ignore order of patterns
        </label>
      </div>
    </div>
  </div>

  <div nz-col nzSpan="6">
    <ul nz-list [nzDataSource]="inspections" nzBordered nzSize="large" [nzLoading]="loading">
      <li nz-list-item *ngFor="let item of inspections">
        <span nz-tooltip [nzTooltipTitle]="item.tooltip" [innerHTML]="item.inspectionLineName"></span>
      </li>
      <nz-list-footer> Result: {{inspections.length}} items </nz-list-footer>
    </ul>
  </div>
</div>